<!DOCTYPE html>
<html>
<head>
	<title>checkbox selection</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<!-- Strart Checkbox single and all check demo -->
		<h3 class="text-center">Checkbox single and all check demo</h3>
		<div class="row">
			<div class="col-md-2"></div>
			<div class="col-md-8 text-center">
				<table class="table table-bordered">
				    <thead>
				      <tr>
				        <th>
							<input type="checkbox" class="select_all_checkbox" onclick="select_all_checkbox(this)" name="select_all_checkbox">
				        </th>
				        <th>Name</th>
				        <th>Email</th>
				      </tr>
				    </thead>
				    <tbody>
				      <tr>
				        <td>
							<input class="select_this_checkbox" type="checkbox" name="select_this_checkbox" value="1" onclick="select_this_checkbox(this,1)">
				        </td>
				        <td>John</td>
				        <td>john@example.com</td>
				      </tr>

				      <tr>
				        <td>
							<input class="select_this_checkbox" type="checkbox" name="select_this_checkbox" value="2" onclick="select_this_checkbox(this,2)">
				        </td>
				        <td>John</td>
				        <td>john@example.com</td>
				      </tr>

				      <tr>
				        <td>
							<input class="select_this_checkbox" type="checkbox" name="select_this_checkbox" value="3" onclick="select_this_checkbox(this,3)">
				        </td>
				        <td>John</td>
				        <td>john@example.com</td>
				      </tr>

				      <tr>
				        <td>
							<input class="select_this_checkbox" type="checkbox" name="select_this_checkbox" value="4" onclick="select_this_checkbox(this,4)">
				        </td>
				        <td>John</td>
				        <td>john@example.com</td>
				      </tr>

				      <tr>
				        <td>
							<input class="select_this_checkbox" type="checkbox" name="select_this_checkbox" value="5" onclick="select_this_checkbox(this,5)">
				        </td>
				        <td>John</td>
				        <td>john@example.com</td>
				      </tr>

				    </tbody>
				</table>

				<textarea id="all_ids"></textarea>
			</div>
			<div class="col-md-2"></div>
		</div>
		<script type="text/javascript">
			function select_this_checkbox(me, id){

		        $('.select_this_checkbox').each(function() {
		            if ($(me)[0].checked == false) {
		                $(".select_all_checkbox" ).prop( "checked", false );
		            }
		        });
		        
		        var flag = true;
		        for(i=0;i<$(".select_this_checkbox").length;i++){
		            if($(".select_this_checkbox")[i].checked == false){
		                flag = false;
		                break;
		            }
		        }
		        $(".select_all_checkbox" ).prop( "checked", flag );

		        var checkbox_arr = [];
		        $("input:checkbox[name=select_this_checkbox]:checked").each(function(){
		            checkbox_arr.push($(this).val());
		        });

		        var arr = JSON.stringify( checkbox_arr );
		        $('#all_ids').html(arr);
		    }

		    function select_all_checkbox(me){

		        if ($(me)[0].checked == true) {
		            $('.select_this_checkbox').each(function() {
		                this.checked = true;

		                var checkbox_arr = [];
		                $("input:checkbox[name=select_this_checkbox]:checked").each(function(){
		                    checkbox_arr.push($(this).val());
		                });

		                var arr = JSON.stringify( checkbox_arr );
		                $('#all_ids').html(arr);
		            });
		        }else{
		             $('.select_this_checkbox').each(function() {
		                this.checked = false;

		                var checkbox_arr = [];
		                $("input:checkbox[name=select_this_checkbox]:checked").each(function(){
		                    checkbox_arr.push($(this).val());
		                });

		                var arr = JSON.stringify( checkbox_arr );
		                $('#all_ids').html(arr);
		            });
		        }
		    }
		</script>
		<!-- Strart Checkbox single and all check demo -->
	</div>
</body>
</html>
